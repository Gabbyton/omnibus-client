import { Marker } from "./marker.model";

const ICON_SIZE = 64;

export class StopMarker extends Marker {
    color: string;
    constructor(location: number[], name: string, color: string) {
        super(location, name, color);
    }

    public toJSON(): any {
        const displayColor = `#${this.color}`;
        return {
            position: {
                lat: this.position[0],
                lng: this.position[1],
            },
            title: this.title,
            options: {
                icon: {
                    // draw icon manually
                    // TODO: generate this code from file
                    url: `data:image/svg+xml;utf-8, \
                    <svg width="${ICON_SIZE}" height="${ICON_SIZE}" viewBox="0 0 ${ICON_SIZE} ${ICON_SIZE}" xmlns="http://www.w3.org/2000/svg"> \
                      <path fill="${encodeURIComponent(displayColor)}" d="M64,18.74V45.12q-9,9.14-18,18.24a2,2,0,0,1-1.26.62Q32,64,19.4,64a1.61,1.61,0,0,1-1-.42q-9-9-18-18A1.39,1.39,0,0,1,0,44.7Q0,32.12,0,19.52a1.81,1.81,0,0,1,.48-1.08C6.42,12.47,12.35,6.53,18.26.56A1.66,1.66,0,0,1,19.55,0Q31.93,0,44.29,0a1.94,1.94,0,0,1,1.52.63Q53.39,8.24,61,15.82C62,16.81,63,17.77,64,18.74ZM31.85,51v0h4.51l4.58,0c1.66,0,2.36.73,2.33,2.37a6.25,6.25,0,0,1-.07.87,2.8,2.8,0,0,0,2.12,3.1c1.66.43,3.21-.21,3.64-1.65a8.34,8.34,0,0,0,.23-2.35c0-2.15.1-2.24,2.26-2.38a1.2,1.2,0,0,0,1.32-1.26,16,16,0,0,0,.06-1.83c0-3.92-.15-7.83-.14-11.75A124,124,0,0,0,50.88,14.9a6.79,6.79,0,0,0-4.61-5.69,39.39,39.39,0,0,0-17-2.61A40.5,40.5,0,0,0,17,9.53a5.65,5.65,0,0,0-3.68,4.67c-.12.82-.24,1.63-.32,2.44-.62,6.13-1.42,12.25-1.78,18.39-.27,4.72,0,9.47.07,14.21,0,1.6,0,1.6,1.56,1.63,1.27,0,1.8.51,1.93,1.81.07.68.1,1.37.17,2.06a2.8,2.8,0,0,0,2.85,2.79,3.1,3.1,0,0,0,3-3.05c0-.5,0-1,0-1.5,0-1.45.54-2,2-2C25.85,51,28.85,51,31.85,51Z"></path> \
                      <path fill="${encodeURIComponent(displayColor)}" d="M38.75,31.27H18.12c-2.61,0-3.29-.83-2.9-3.42.48-3.29.93-6.6,1.37-9.9.23-1.72.9-2.34,2.65-2.35l9.88-.05Q36,15.5,43,15.47a23.17,23.17,0,0,1,2.36.13,2,2,0,0,1,2.1,2c.4,2.45.73,4.92,1.07,7.38.18,1.25.39,2.51.47,3.77.1,1.8-.53,2.42-2.3,2.42h-7.9Z"></path> \
                      <path fill="${encodeURIComponent(displayColor)}" d="M30.79,10.61c3.05,0,6.11,0,9.16,0a1.64,1.64,0,0,1,1,.22A1.5,1.5,0,0,1,41.46,12c-.05.28-.51.62-.84.72a4.59,4.59,0,0,1-1.34,0l-13.5.07c-.76,0-1.52-.06-2.28-.07a.94.94,0,0,1-1-.88,1,1,0,0,1,.83-1.16,5.33,5.33,0,0,1,1.25-.14h6.24Z"></path> \
                      <path fill="${encodeURIComponent(displayColor)}" d="M46.21,44.17a2.71,2.71,0,1,1,0-5.42A2.52,2.52,0,0,1,49,41.47,2.56,2.56,0,0,1,46.21,44.17Z"></path> \
                      <path fill="${encodeURIComponent(displayColor)}" d="M17.84,38.75a2.56,2.56,0,0,1,2.69,2.6,2.74,2.74,0,1,1-5.48.07A2.6,2.6,0,0,1,17.84,38.75Z"></path> \
                    </svg>`,
                    scaledSize: new google.maps.Size(15, 15),
                },
                zIndex: (100),
            }
        }
    }
}