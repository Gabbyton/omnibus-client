<google-map height="100vh" width="100%" [zoom]="mapZoom" [center]="mapCenter" [options]="mapOptions" *ngIf="!(onInitLoading || prefetchLoading || busTimerLoading || mapLoading); else mapLoadingScreen">
  <map-marker *ngFor="let marker of displayMarkers" [position]="marker.position" [label]="marker.label"
    [title]="marker.title" [options]="marker.options">
  </map-marker>
  <map-marker *ngFor="let busId of displayBusIds" [position]="busMap.get(busId).position"
    [label]="busMap.get(busId).label" [title]="busMap.get(busId).title" [options]="busMap.get(busId).options">
  </map-marker>
  <map-polyline *ngFor="let segment of drawSegmentSet; index as i" [path]="segment" [options]="segmentOptions"></map-polyline>
</google-map>

<ng-template #mapLoadingScreen>
  <div class="loading-screen">
    <div class="spinner">
      <mat-spinner [diameter]="100"></mat-spinner>
    </div>
  </div>
</ng-template>